\subsection{Теории первого порядка с равенством}
Пусть $K$~---~теория первого порядка с предикатной буквой $A_1^2$:
\[
    A_1^2(x_1, x_2) \Longleftrightarrow x_1 = x_2,\quad \neg A_1^2(x_1, x_2) \Longleftrightarrow x_1 \neq x_2.
\]
\begin{definition*}
    Теория $K$ называется \textit{теорией первого порядка с равенством}, если следующие формулы являются её теоремами (если точнее, дополнительными аксиомами):
    \begin{enumerate}[label=\Alph*.]
        \item $\forall x_1(x_1 = x_1)$ (рефлексивность равенства);
        \item $x_1 = x_2 \supset \big(A(x_1, x_1) \supset A(x_1, x_2)\big)$ (подстановочность равенства), где $x_1, x_2$~---~предметные переменные, $A(x_1, x_1)$~---~произвольная формула, а $A(x_1, x_2)$ получается из $A(x_1, x_1)$ заменой некоторых (не обязательно всех, может быть, вообще ни одного) свободных вхождений $x_1$ переменной $x_2$, при этом $x_2$ свободно для заменяемых вхождений $x_1$.
    \end{enumerate}
\end{definition*}
\begin{lemma}\label{th:eq_properties}
    Во всякой теории первого порядка с равенством:
    \begin{enumerate}[label=\arabic*)]
        \item $\vdash t = t$, где $t$~---~произвольный терм;
        \item $\vdash x_1 = x_2 \supset x_2 = x_1$;
        \item $\vdash x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)$.
    \end{enumerate}
\end{lemma}
\begin{proof}\leavevmode
    \begin{enumerate}[label=\arabic*)]
        \item
        \begin{enumerate}[label=\arabic*.]
            \item $\forall x_1(x_1 = x_1)$ (рефлексивность равенства);
            \item $t = t$ (из 1 по правилу индивидуализации, любой терм $t$ свободен для $x_1$ в элементарной формуле $x_1 = x_1$).
        \end{enumerate}

        \item
        \begin{enumerate}[label=\arabic*.]
            \item $x_1 = x_1$ (доказанный п.1);
            \item $x_1 = x_2 \supset (x_1 = x_1 \supset x_2 = x_1)$ (подстановочность равенства с $A(x_1, x_1) \leftrightharpoons x_1 = x_1$ и $A(x_1, x_2) \leftrightharpoons x_2 = x_1$);
            \item $x_1 = x_1 \supset \Big(\big(x_1 = x_2 \supset (x_1 = x_1 \supset x_2 = x_1)\big) \supset \big(x_1 = x_2 \supset x_2 = x_1\big)\Big)$ (теорема, частный случай тавтологии $\mathcal{B} \supset \Big(\big(\mathcal{A} \supset (\mathcal{B} \supset \mathcal{C})\big) \supset \big(\mathcal{A} \supset \mathcal{C}\big)\Big)$)
            \item $\big(x_1 = x_2 \supset (x_1 = x_1 \supset x_2 = x_1)\big) \supset \big(x_1 = x_2 \supset x_2 = x_1\big)$ (из 1, 3 по MP);
            \item $x_1 = x_2 \supset x_2 = x_1$ (из 2, 4 по MP).
        \end{enumerate}

        \item 
        \begin{enumerate}[label=\arabic*.]
            \item $x_2 = x_1 \supset (x_2 = x_3 \supset x_1 = x_3)$ (подстановочность равенства с $A(x_2, x_2) \leftrightharpoons x_2 = x_3$ и $A(x_2, x_1) \leftrightharpoons x_1 = x_3$);
            \item $x_1 = x_2 \supset x_2 = x_1$ (симметричность равенства, доказанный п.2);
            \item $(x_1 = x_2 \supset x_2 = x_1) \supset \Big(\big(x_2 = x_1 \supset (x_2 = x_3 \supset x_1 = x_3)\big) \supset \big(x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)\big)\Big)$ (теорема, частный случай тавтологии $(\mathcal{A} \supset \mathcal{B}) \supset \big((\mathcal{B} \supset \mathcal{C}) \supset (\mathcal{A} \supset \mathcal{C})\big)$);
            \item $\big(x_2 = x_1 \supset (x_2 = x_3 \supset x_1 = x_3)\big) \supset \big(x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)\big)$ (из 2, 3 по MP);
            \item $x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)$ (из 1, 4 по MP).
        \end{enumerate}
    \end{enumerate}
\end{proof}
Упрощение условия для подстановочности равенства даёт следующее утверждение.
\begin{lemma}
    Если теоремами теории первого порядка $K$ является формула (A) и (B) для любой элементарной формулы $A$, то $K$ есть теория первого порядка с равенством, то есть в $K$ всякая формула (B) является теоремой.
\end{lemma}
\begin{proof}
    Если $A$~---~элементарная формула, то доказывать нечего, (B) является теоремой по условию леммы. Пусть теперь $A$ не является элементарной формулой. Доказываем лемму по индукции по $n$, где $n$~---~число связок и кванторов в $A$.

    \textbf{База}: $n = 1$. Тогда формула $A$ имеет один из трёх видов: $\forall x_iP$, $P \supset Q$ и $\neg P$, где $P, Q$~---~элементарные формулы. Доказательство для этих случаев такое же, как в индукционном шаге.

    \textbf{Индукционное предположение}: пусть доказываемое нами утверждение верно для всех $k < n$.

    \textbf{Индукционный шаг}: докажем утверждение для случая числа связок и кванторов, равного $n$. Имеют место три случая: $A$ есть $P \supset Q$ или $A$ есть $\neg P$, или $A$ есть $\forall x_iP$, где $P, Q$~---~формулы с меньшим числом связок и кванторов, чем в $A$. Рассмотрим детально эти случаи:
    \begin{enumerate}
        \item \underline{$A(x_1, x_1) \leftrightharpoons \neg P(x_1, x_1)$}. Далее через $P(x_1, x_1)$ будем обозначать результат замены некоторых (необязательно всех) свободных вхождений $x_2$ в $P$ на $x_1$. Для $P(x_1, x_1)$ верно индукионное предположение:
        \begin{equation}\label{eq:step_1}
            \vdash x_2 = x_1 \supset \big(P(x_1, x_2) \supset P(x_1, x_1)\big)
        \end{equation}
        Воспользуемся теоремой, являющейся частным случаем тавтологии: $\vdash \big(P(x_1, x_2) \supset P(x_1, x_1)\big) \supset \big(\neg P(x_1, x_1) \supset \neg P(x_1, x_2)\big)$ (формула контрапозиции). Применяя доказанную в лемме \ref{th:eq_properties} (п.2) теорему $\vdash x_1 = x_2 \supset x_2 = x_1$, транзитивность импликации и выписанную контрапозицию, из \eqref{eq:step_1} выводим требуемое:
        \[
            \vdash x_1 = x_2 \supset \big(\neg P(x_1, x_1) \supset \neg P(x_1, x_2)\big) \Longleftrightarrow\ \vdash x_1 = x_2 \supset \big(A(x_1, x_1) \supset A(x_1, x_2)\big).
        \]

        \item \underline{$A(x_1, x_1) \leftrightharpoons P(x_1, x_1) \supset Q(x_1, x_1)$}. Снова для $P$ и $Q$ верно индукционное предположение:
        \begin{equation}\label{eq:step_2}
            \vdash x_2 = x_1 \supset \big(P(x_1, x_2) \supset P(x_1, x_1)\big),\quad \vdash x_1 = x_2 \supset \big(Q(x_1, x_1) \supset Q(x_1, x_2)\big).
        \end{equation}
        Применяя теорему $\vdash x_1 = x_2 \supset x_2 = x_1$ из первой выводимости в \eqref{eq:step_2} получаем
        \begin{equation}\label{eq:step_3}
            \vdash x_1 = x_2 \supset \big(P(x_1, x_2) \supset P(x_1, x_1)\big).
        \end{equation}
        Воспользуемся тавтологией:
        \begin{equation}\label{eq:step_4}
            \big(\mathcal{A} \supset (\mathcal{B}_1 \supset \mathcal{B})\big) \supset \bigg(\big(\mathcal{A} \supset (\mathcal{C} \supset \mathcal{C}_1)\big) \supset \Big(\mathcal{A} \supset \big((\mathcal{B} \supset \mathcal{C}) \supset (\mathcal{B}_1 \supset \mathcal{C}_1)\big)\Big)\bigg)
        \end{equation}
        Запишем теорему, являющуюся частным случаем записанной тавтологии \eqref{eq:step_4} ($\mathcal{A} \leftrightharpoons x_1 = x_2$, $\mathcal{B}_1 \leftrightharpoons P(x_1, x_2)$, $\mathcal{B} \leftrightharpoons P(x_1, x_1)$, $\mathcal{C}_1 \leftrightharpoons Q(x_1, x_2)$, $\mathcal{C} \leftrightharpoons Q(x_1, x_1)$):
        \begin{multline}\label{eq:step_5}
            \Big(x_1 = x_2 \supset \big(P(x_1, x_2) \supset P(x_1, x_1)\big)\Big) \supset \Bigg(\Big(x_1 = x_2 \supset \big(Q(x_1, x_1) \supset Q(x_1, x_2)\big)\Big) \supset \\
            \supset \bigg(x_1 = x_2 \supset \Big(\big(P(x_1, x_1) \supset Q(x_1, x_1)\big) \supset \big(P(x_1, x_2) \supset Q(x_1, x_2)\big)\Big)\bigg)\Bigg)
        \end{multline}
        Дважды применяя MP (\eqref{eq:step_3} и \eqref{eq:step_5}, а затем вторая выводимость в \eqref{eq:step_2} и результат предыдущего MP), получаем искомое
        \[
            \vdash x_1 = x_2 \supset \Big(\big(P(x_1, x_1) \supset Q(x_1, x_1)\big) \supset \big(P(x_1, x_2) \supset Q(x_1, x_2)\big)\Big) \Longleftrightarrow\ \vdash x_1 = x_2 \supset \big(A(x_1, x_1) \supset A(x_1, x_2)\big).
        \]

        \item \underline{$A(x_1, x_1)$ есть $\forall x_iP(x_1, x_1, x_i)$}. Для $P$ верно индукционное предположение:
        \[
            \vdash x_1 = x_2 \supset \big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big).
        \]
        Применяем правило Gen:
        \begin{equation}\label{eq:step_6}
            \vdash \forall x_i\Big(x_1 = x_2 \supset \big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big)\Big).
        \end{equation}
        Запишем аксиому А5 (правомерность её применения заключается в том, что в формуле $x_1 = x_2$ нет свободных вхождений $x_i$):
        \[
            \vdash \forall x_i\Big(x_1 = x_2 \supset \big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big)\Big) \supset \Big(x_1 = x_2 \supset \forall x_i\big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big)\Big),
        \]
        из этого и из \eqref{eq:step_6} по MP заключаем
        \begin{equation}\label{eq:step_7}
            \vdash x_1 = x_2 \supset \forall x_i\big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big).
        \end{equation}
        Затем запишем вспомогательное утверждение:
        \[
            \vdash \forall x_i(\mathcal{A} \supset \mathcal{B}) \supset (\forall x_i\mathcal{A} \supset \forall x_i\mathcal{B}).
        \]
        Поясним это утверждение. Докажем $\forall x_i(\mathcal{A} \supset \mathcal{B}), \forall x_i\mathcal{A} \vdash \forall x_i\mathcal{B}$:
        \begin{enumerate}[label=\arabic*)]
            \item $\forall x_i(\mathcal{A} \supset \mathcal{B})$ (гипотеза);
            \item $\mathcal{A} \supset \mathcal{B}$ (из 1 по правилу индивидуализации, переменная $x_i$ свободна для самой себя в любой формуле);
            \item $\forall x_i\mathcal{A}$ (гипотеза);
            \item $\mathcal{A}$ (из 3 по правилу индивидуализации, переменная $x_i$ свободна для самой себя в любой формуле);
            \item $\mathcal{B}$ (из 4, 2 по MP);
            \item $\forall x_i\mathcal{B}$ (из 5 по Gen).
        \end{enumerate}
        В выводе выше единственная переменная $x_i$, к которой применялось правило Gen, является связанной в обеих гипотезах выводимости, поэтому можно применить теорему дедукции (даже дважды) и получить искомое $\vdash \forall x_i(\mathcal{A} \supset \mathcal{B}) \supset (\forall x_i\mathcal{A} \supset \forall x_i\mathcal{B})$. Запишем проверенное утверждение при $\mathcal{A} \leftrightharpoons P(x_1, x_1, x_i)$ и $\mathcal{B} \leftrightharpoons P(x_1, x_2, x_i)$:
        \begin{equation}\label{eq:step_8}
            \vdash \forall x_i\big(P(x_1, x_1, x_i) \supset P(x_1, x_2, x_i)\big) \supset \big(\forall x_iP(x_1, x_1, x_i) \supset \forall x_iP(x_1, x_2, x_i)\big).
        \end{equation}
        Применяя транзитивность импликации к \eqref{eq:step_7} и \eqref{eq:step_8}, заключаем требуемое:
        \[
            \vdash x_1 = x_2 \supset \big(\forall x_iP(x_1, x_1, x_i) \supset \forall x_iP(x_1, x_2, x_i)\big) \Longleftrightarrow\ \vdash x_1 = x_2 \supset \big(A(x_1, x_1) \supset A(x_1, x_2)\big).
        \]
    \end{enumerate}
    Таким образом, индукцией по числу связок и кванторов в формуле $A$ проверено утверждение леммы, это завершает доказательство.
\end{proof}

\textbf{Примеры}:
\begin{enumerate}
    \item Теория групп $G$: предикатная буква $A_1^2$ ($A_1^2(x_1, x_2) \leftrightharpoons x_1 = x_2$), функциональная буква $f_1^2$ ($f_1^2(x_1, x_2) \leftrightharpoons x_1 + x_2$), предметная константа $a_1$ ($0$). Собственные аксиомы:
    \begin{enumerate}[label=\Alph*.]
        \item $x_1 + (x_2 + x_3) = (x_1 + x_2) + x_3$;
        \item $x_1 + 0 = x_1$;
        \item $\forall x_1\exists x_2(x_1 + x_2 = 0)$;
        \item $x_1 = x_1$;
        \item $x_1 = x_2 \supset x_2 = x_1$;
        \item $x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)$;
        \item $x_1 = x_2 \supset (x_1 + x_3 = x_2 + x_3 \land x_3 + x_1 = x_3 + x_2)$.
    \end{enumerate}
    Можно показать, что $G$ есть теория первого порядка с равенством. \\
    Если добавить аксиому
    \begin{enumerate}[label=\Alph*., start=8]
        \item $x_1 + x_2 = x_2 + x_1$,
    \end{enumerate}
    то получится теория $G_C$ коммутативных (абелевых) групп.

    \item Теория полей $F$: предикатная буква $A_1^2$ ($A_1^2(x_1, x_2) \leftrightharpoons x_1 = x_2$), функциональные буквы $f_1^2$ ($f_1^2(x_1, x_2) \leftrightharpoons x_1 + x_2$) и $f_2^2$ ($f_2^2(x_1, x_2) \leftrightharpoons x_1\cdot x_2$), предметные константы $a_1$ ($0$) и $a_2$ ($1$). Собственные аксиомы:
    \begin{enumerate}[label=\Alph*.]
        \item $x_1 + (x_2 + x_3) = (x_1 + x_2) + x_3$;
        \item $x_1 + 0 = x_1$;
        \item $\forall x_1\exists x_2(x_1 + x_2 = 0)$;
        \item $x_1 = x_1$;
        \item $x_1 = x_2 \supset x_2 = x_1$;
        \item $x_1 = x_2 \supset (x_2 = x_3 \supset x_1 = x_3)$;
        \item $x_1 = x_2 \supset (x_1 + x_3 = x_2 + x_3 \land x_3 + x_1 = x_3 + x_2)$;
        \item $x_1 + x_2 = x_2 + x_1$;
        \item $x_1 = x_2 \supset (x_1\cdot x_3 = x_2\cdot x_3 \land x_3 \cdot x_1 = x_3 \cdot x_2)$;
        \item $x_1\cdot(x_2\cdot x_3) = (x_1\cdot x_2)\cdot x_3$;
        \item $x_1\cdot(x_2 + x_3) = (x_1\cdot x_2) + (x_1\cdot x_3)$;
        \item $x_1\cdot x_2 = x_2\cdot x_1$;
        \item $x_1\cdot 1 = x_1$;
        \item $x_1 \neq 0 \supset \exists x_2(x_1\cdot x_2 = 1)$.
    \end{enumerate}
    Можно показать, что $F$ есть теория первого порядка с равенством. Аксиомы (A)--(M) определяют теорию $R_C$ коммутативных колец с единицей.
\end{enumerate}